 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
	<head>
    	<meta charset="UTF-8">
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="devErrorReport.js"></script>
	</head>
 	<body>
    	<h2 style="color:teal">Test Type</h2>
        <input type="radio" checked="checked" value="true" name="testType" id="practiceRadio" /> Practice 
        <input type="radio" name="testType" value="false" id="finalRadio" /> Final
        <div id="practiceDiv">
            <h3 style="color:teal">Practice Exam (Instructor Input)</h3>
            
            <p>low and high WPM must be concentric around the midrange WPM</p>
            <p>These are only for the illustration that happens below and are not important to the test itself</p>
            
            <input id="lowWPM" type="text"  placeholder="low WPM..." 	/>
            <br>
            
            <input id="midWPM" type="text"  placeholder="midrange WPM..." 	/>
            <br>
            
            <input id="highWPM" type="text" readonly="readonly" placeholder="high WPM..." 	/> <--- Is assigned automatically after filling in low and high WPM
            <br>
            
            <input id="PracticeTitle" type="text" name="title" placeholder="Practice title..." 	/>
            <br>
            
            <p>Practice #</p>
            
            <select id="practiceNum" >
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
            <br/>
                
            <textarea id="practiceText" name="assesment" rows="8" cols="64" placeholder="the instructor will input the material for which the student will be assesed in this box"></textarea>
            <br/>
        	<br/>
            <input id="practiceSubmit" type="button" value="Finished" />
        </div>
        
        <div id="finalDiv" >
        	<h3 style="color:teal">Final Exam (Instructor Input)</h3>
        	<input id="timeLimit" type="text"  placeholder="time limit (seconds)..." 	/> <---Please enter the time in seconds
            <br>
			<textarea id="finalText" rows="8" cols="64" placeholder="input test here..."></textarea>
			<br> 
            <input id="finalSubmit" type="button"  value="Finished" />
        </div>
        <div id="result"></div>
    </body>
</html>

<script type="text/javascript">	
	
	$("#finalDiv").hide(); //initally hides the final input information
	
	$("#practiceRadio").change( //waits for a change in the "practice" radio. When changed it changes the scene to show the practice information (deafult page load)
		function(){
			if(this.checked)
				$("#finalDiv").hide();
				$("#practiceDiv").show();
			}	
	);
	
	$("#finalRadio").change( // when "final"radio is chosen, the practice information is hidden and the final information is shown
		function(){
			if(this.checked)
				$("#practiceDiv").hide();
				$("#finalDiv").show();
			}	
	);
	
	
	//the low, mid and high WPM values need to be concesntric around the mid, for the purpose the game, so the high is calculated to avoid confusion and errors
	$("#lowWPM").change(changeValue); 
	$("#midWPM").change(changeValue);
	
	function changeValue(){
		
		var lowWPM = $("#lowWPM").val()*1;//multiplied by 1 to convert from a string to an int
		var midWPM = $("#midWPM").val()*1;
		
		if( lowWPM != "" && midWPM != ""){
			if(lowWPM  <=  midWPM )
				$("#highWPM").val(2*midWPM - lowWPM); 
				
		}
	}
	
	$("#practiceSubmit").click(stringToJSONPractice);
	$("#finalSubmit").click(stringToJSONFinal);
	
	
	function stringToJSONPractice(){
		
		var error = false;
		var errorMessage = "These fields cannot be blank:\n";
		var JSONString = "";
		
		var lowWPM = $("#lowWPM").val();
		var midWPM = $("#midWPM").val();
		
		var title = $("#PracticeTitle").val();
		var text = $("#practiceText").val();
					
		if(lowWPM == ""){
			errorMessage += "low WPM\n";
			error = true;	
		}
		if( midWPM == ""){
			errorMessage += "mid WPM\n";
			error = true;	
		}
		if( title == ""){
			errorMessage += "title\n";
			error = true;	
		}
		if( text == ""){
			errorMessage += "text\n";
			error = true;	
		}
	
		if(!error){
			JSONString = '{ "lowWPM":' + JSON.stringify(lowWPM) + ', "midWPM":' + JSON.stringify(midWPM) +', "highWPM":' + JSON.stringify($("#highWPM").val()) + ', "title":' + JSON.stringify(title) + ', "practiceNum":' + JSON.stringify($("#practiceNum").val()) + ', "text":' + JSON.stringify(text) + '}';
			$("#result").text(JSONString);
		}else{
			alert(errorMessage);	
		}
			
	}
					
	function stringToJSONFinal(){
		
		var error = false;
		var errorMessage = "These fields cannot be blank:\n";
		var JSONString = "";
			
		if($("#timeLimit").val() == ""){
			errorMessage += "time limit\n";
			error = true;	
		}
		if($("#finalText").val() == ""){
			errorMessage += "text\n";
			error = true;	
		}
		
		if(!error){
			JSONString = '{ "timeLimit":' + JSON.stringify($("#timeLimit").val())  + ', "text":' + JSON.stringify($("#finalText").val()) + '}';
			$("#result").text(JSONString);
		}else{
			alert(errorMessage);	
		}
	}
	
</script>